Black
Box
Trading
System
github
Repository
drew-bb
netproz@icloud.com
M1a2n3hattan
5m
Chart
Usage
PRIMAR Y
Time
Frame
1.
Use
trade
triggers
from
this
chart
to
enter. 
2.
Only
enter
trades
following1h
momentum
reflected
thru
histogram
&
RSIma. 
3.
When
prices
close
across
5m
13ema,
this
constitutes
a
5m
retrace. 
4.
If
5m
exit
would
result
in
<
10p
profit
ignore
5m
exits
and
follow
rules
of
Flag
8a.
The
trade
protetion 
&
exit
is
1h
13ema
unless
another
1h
exit
presents
itself. 
5.
There
are
2
possible
5m
exits:
the
5m
RSI
&
5m
13ema.
1h
Chart
Usage
1.
When
red
ma
cloud,
ignore
5m
buy
triggers,
when
blue
ma
cloud,
ignore
5m
sell
triggers. 
red
cloud
=
8ema
<
21ema
blue
cloud
=
8ema
>
21ema 
2.
RSIma
momentum
must
support
5m
trade
triggers; 
red
line
=
sell
triggers,
green
line
=
buy
triggers. 
3.
RSI
Histogram
must
be
higher
to
buy
&
lower
to
sell. 
4.
Raw
RSI
must
be
up
to
buy
&
down
to
sell. 
5.
Price
must
close
across
13ema
to
support
trade.
15m
Chart
Usage
1.
Ignore
this
chart
until
AFTER
first
1h
exit
in
a
trend. 
2.
After
1st
1h
exit
in
the
SAME
1h
trend,
substitute
15m
trade
confirmations
for
1h
trade 
confirmations;
entry
AND
exit. 
Note:
1h
ma
cloud
color
still
determines
which
trades
to
follow. 
3.
New
5m
entry
requirement
for
when
this
chart
is
active...15m
RSIma
MUST
cross
0
in
favor
of 
trade.
Not
a
requirement
for
the
1h
chart
in
normal
trading. 
15m
chart
still
requires
RSIma
color
&
histogram
&
raw
RSI
support
for
5m
trade. 
15m
exits
apply;
both
15m
RSI
AND
15m
13ema. 
4.
1h
RSIma
color
may
substitute
for
15m
RSIma
color
as
long
as
15m
RSIma
has
crossed
0
in
favor 
of
5m
entry
trigger.
NEVER
fight
the
1h
RSIma
color. 
5.
1h
exit
triggers
no
longer
relevant.
1h
Acceleration
flag
may
interrupt
15m
chart
usage. 
Flag
8a
may
also
override
a
15m
exit
for
<
10p
profit.
If
15m
exit
results
in
<
10p
profit
ignore
15m 
exit
as
long
as
1h
13ema
supports
trade.
1h
13ema
is
then
the
exit.
Process
as
if
Flag
8a
active. 
6.
15m
chart
usage
disabled
after
next
1h
8x21
MA
crossover
OR
1h
21ema
has
turned
against
1h 
cloud
OR
1h
RSIma
crosses
0
against
the
cloud...whichever
comes
first.
After
15m
chart
is 
disabled,
FULL
1h
trade
confirmation
is
again
required. 
7.
There
are
two
15m
exits:
the
15m
RSI
and
the
15m
13ema.Benefits
of
15m
chart
substitution: 
1.
1h
histogram
not
required. 
2.
1h
RSIma
color
not
required. 
3.
4x
faster
entry
&
exit
triggers
with
the
same
5m
entry
triggers. 
4.
Maintain
benefit
of
long-term
confirmation
of
5m
triggers. 
5.
Helps
avoid
trade
entry
at
long-term
tops
&
bottoms.
(mostly
thru
RSIma
crossing 
0).
******************************************************************************************
To
open
the
trading
week...
1.
Establish
long-term
trend
with
1h
MA
cloud. 
2.
Await
a
5m
retrace
regardless
of
whether
a
5m
trade
trigger
has
presented
itself. 
3.
After
5m
retrace,
approach
trading
with
normal
BB
approach. 
4.
If
the
1h
cloud
is
blue
and
5m
prices
are
already
below
the
13ema,
crossing
above
the
13ema
does 
NOT
constitute
a
retrace.
Prices
must
move
below
the
13ema
and
THEN
cross
above
again 
before
a
5m
buy
trigger
is
executed...and
vice
versa.
******************************************************************************************
Trading
Flags
1.
Weekly
start
flag.
Initialize
1h
trend
for
5m
retrace
requirement.
What
is
the
1h
MA
cloud
color. 
so
1h
Red
cloud
requires
5m
close
crossing
above
13ema
and 
so
1h
Blue
cloud
requires
5m
close
crossing
below
13ema. 
Either
condition
clears
the
flag
for
normal
trading.
2.
Trading
Range
Flag.
If
1h
rsi21ema
is
between
47-53
AND
has
moved
less
than
1.8
from
2
days 
ago
then
set
this
flag.
NO
TRADING
any
signals
in
any
time-frame.
Reset
flag
when
rsi21ema
is 
above
or
below
this
range
or
raw
RSI
rises
above
70
or
below
30.
Ignore
5m
triggers
until
5m 
retrace.
So
if
1h
rsi21ema
crosses
above
53
price
must
close
below
the
5m
13ema
as
a
retrace
& 
vice
versa.
Then
trade
normally. 
Note:
A
trading
range
resets
everything.
Treat
a
trading
range
exit
as
if
it's
a
new
1h
cloud
color 
except
the
requirement
for
a
5m
retrace.
5m
retrace
required
when
exiting
a
trading
range. 
Note:
1h
rsi21ema
may
make
moves
greater
than
1.8
from
2
bars
ago
inside
this
range.
This
does 
NOT
clear
the
flag...only
rising
above
53
or
dropping
below
47
clears
this
flag
or
raw
RSI.
IOW 
only
1
bar
is
required
to
establish
this
flag
and
this
may
adversely
affect
other
bars
which
exceed 
1.8
in
movement
inside
this
range. 
Note:
rsi21ema
rising
above
53
may
do
so
being
less
than
1.8
from
2
bars
ago:
flag
is
CLEARED. 
Note:
if
an
active
trade
is
present
when
this
flag
is
set
there
are
no
special
rules
for
exit.
Process 
exits
normally
as
specified
elsewhere. 
2a.
Outside
the
47-53
range...
ANY
rsi21ema
move
<
1.3
from
2
bars
ago
means
do
not
open
a
new 
trade.
Not
sufficient
momentum
to
trade.
No
special
rules
like
between
47-53.
A
move
<
1.3
on 
rsi21ema
simply
means
stand
aside
for
this
1h
bar. 
Note:
if
flag
2
not
active
then
2a
IS
applicable
inside
the
47-53
range
also...rsi21ema
is
moving
thru 
range.3.
No
longer
used.
4.
Losing
trade
flag.
Set
flag
for
ten
5m
bars
for
no
trading
period
(ignore
all
triggers),
then
clear
for 
normal
trading.
Count
10
from
the
bar
after
closing
bar.
...helps
avoid
volatile
whipsaws
in 
market
5.
RSI
Exit
Flag
Activate
flag
when
RSI
is
above
70
for
3
consecutive
1h
bars
in
a
blue
cloud
or 
below
30
for
3
consecutive
bars
in
a
red
cloud. 
Note:
ignore
the
histogram
exit
as
long
as
this
flag
is
set.
We
do
not
want
to
disable
flag
9 
because
we
want
it
to
activate
immediately
should
this
flag
turn
off.
As
long
as
we
are
still 
qualified
for
flag
9
we
want
that
flag
to
remain
active.
6.
Obsolete.
No
longer
used.
7.
15m
chart
active
flag.
Used
as
a
simple
toggle
for
when
to
follow
15m
chart
vs
1h
chart.
Set
flag 
after
first
1h
exit
(either
RSI
or
13ema
or
5ema
or
Histogram)
in
a
trend.
Clear
flag
when
8x21
MA 
crossover
(1h
color
change)
OR
1h
21ema
turns
against
cloud
OR
1h
RSIma
crosses
0
against 
the
1h
cloud.
8.
Acceleration
Phase
flag.
Prices
close
for
5
CONSECUTIVE
bars
above
1h
5ema
in
a
1h
blue
cloud 
or
below
1h
5ema
in
a
1h
red
cloud.
Count
begins
with
new
cloud
color.
This
activates
a
1h
5ema 
close
to
use
instead
of
the
1h
13ema
close.
1h
RSI
close
is
still
active.
A
histogram
exit
is
also 
implemented.
Set
the
histogram
Flag
9.
Take
next
5m
buy/sell
trigger
if
no
trade
is
already
open 
and
all
1h
or
15m
conditions
are
assumed
true
to
enter
the
trade.
Reset
this
flag
with
1h
close 
below
(above)
1h
5ema
OR
1h
RSIma
is
no
longer
green
in
a
blue
cloud
or
red
in
a
red
cloud.
Note:
If
15m
chart
is
active
when
this
flag
activates;
IGNORE
5m
AND
15m
exits.
The
3
valid
exits 
are
1h
RSI,
1h
5ema,
and
1h
histogram
close. 
Note:
to
start
the
trading
week,
start
the
5
bar
count
from
open
Sunday. 
Note:
If
the
RSIma
color
changes,
allow
any
existing
trades
to
use
the
1h
5ema
or
Flag
9
to
exit 
trade
normally.
The
color
change
prohibits
opening
any
new
positions,
it
does
not
mandate
a
special 
exit.
The
assumption
of
true
conditions
for
15m/1h
trade
entry
is
also
stopped.
Revert
to
normal 
15m/1h
trade
entry...the
15m
chart
is
probably
active
now.
8a.
The
histogram
exit
gets
crushed
when
a
market
is
trending
but
not
quite
strongly
enough
reflected 
by
candles
which
close
against
the
trend.
It's
neither
acceleration
nor
what
this
exit
was
designed 
to
capture.
Therefore,
to
mitigate
this
while
not
losing
it's
many
advantages: 
a.
If
a
histogram
close
will
result
in
<
10p
profit,
skip
close
as
long
as
closing
price
has
1h 
13ema
support. 
b.
If
1h
5ema
exit
will
result
in
<
10p
profit,
skip
close
as
long
as
closing
price
has
1h
13ema 
support
and
new
close
is
1h
13ema
instead
of
1h
5ema.
This
clears
flags
8
&
9
as
normal. 
c.
Start
a
new
histogram
exit
count
(5
bars)
from
the
bar
following
the
bar
which
would
have 
closed
the
trade. 
d.
The
valid
exits
during
this
whole
time
are:
1hRSI
and
1h5ema
(or
1h
13ema...see
b
above).e.
As
before,
a
close
across
the
1h
5ema
restarts
the
count
and
disables
1h5ema
exit
and 
activates
the
1h13ema
exit
again. 
f.
After
a
1h
exit
the
15m
chart
will
activate
again
normally. 
g.
FWIW...this
approach
turned
a
-101p
week
into
a
63p
week.
Note:
always
prioritize
a
1h
RSI
exit.
The
1h
RSI
exit
overrides
8a.
There
is
no
10p
rule
to
not
take 
a
1h
RSI
exit.
9.
Histogram
Exit
Flag 
HISTOGRAM
EXIT
:
AFTER
5
closes
above
5ema
in
a
blue
cloud
(not
before
6th
bar
above
5ema),
when
the
histogram
closes
lower,
exit
at
close
of
that
bar
even
if
close
is
above
5ema. 
Take
next
5m
buy
trigger
and
all
1h
or
15m
conditions
are
assumed
true
to
enter
that
trade.
If
1h 
has
not
closed
below
5ema
Flag
8
is
maintained
even
after
an
exit
while
Flag
9
is
reset.
After
5 
more
closes
above
(below)
5ema
Flag
9
is
active
again
with
all
the
same
rules.
New
5
bar
count 
begins
with
bar
AFTER
exit
bar.
Blue
cloud:
If
histogram
is
still
down
the
histogram
exit
is
not
active
again
until
the
histogram 
closes
up.
Only
AFTER
the
histogram
closes
up
is
the
down
histogram
close
active
again
which 
may
be
the
very
next
bar.
While
histogram
is
down
the
1h
RSI
&
1h
5ema
exits
are
still
active.
The 
histogram
up
or
down
is
irrelevant
when
counting
5
bars
closing
above
1h
5ema.
However,
if
the 
6th
histogram
bar
is
down,
the
first
bar
after
setting
this
flag,
regardless
if
histogram
bar
5
is
up
or 
down,
that
will
trigger
the
first
histogram
exit.
This
process
is
captured
thru
Flag
11.
Exactly 
reverse
conditions
for
a
red
cloud. 
Note:
this
flag
9
captures
the
best
exits
when
the
1h
chart
moves
strongly.
9a.
The
exception
to
Flag
9.
In
a
1h
blue
cloud,
if
raw
RSI
is
up
on
a
histogram
bar
that
is
down
and 
would
otherwise
exit,
do
not
exit
long
trades.
Maintain
everything
else
as
is
and
maintain
the 
histogram
exit
as
active.
If
next
histogram
bar
also
says
exit,
if
raw
RSI
is
up
do
not
exit.
Raw
RSI 
must
be
down
to
exit
a
long
trade
using
the
histogram
exit.
Exactly
reverse
conditions
for
a
red 
cloud.
9b.
The
other
exception
to
Flag
9.
When
1h
RSI
is
extreme
for
3
consecutive
bars
in
an
active
trade
(< 
30
in
red
cloud
or
>
70
in
blue
cloud)
ignore
Flag
9
exit
(maintain
flag)
and
use
normal
RSI
exit. 
(break
across
RSI
21ema
or
30/70).
Then
process
normally.
15m
chart
will
likely
become
active. 
This
is
captured
in
Flag
5.
10.
Candlestick
Suspend
Trading
Flag
Shooting
Star
or
Hammer
present 
Stand
aside
for
3
ADDITIONAL
bars
if
any
of
the
following
occur: 
1.
Flag
8
active. 
2.
Shooting
star
is
highest
high
for
8
bars
or
Hammer
is
lowest
low
for
8
bars. 
3.
Shooting
star
has
RSI
>
70
or
Hammer
has
RSI
<
30. 
Other
conditions
likely
reflect
random
noise
so
do
not
stand
aside
for
3
bars;
process
normally.
11.
Histogram
Reset
Flag 
Set
this
flag
when
Flag
9
turns
off
and
Flag
8
is
still
active.
This
activates
new
requirements
for 
using
Flag
9.
The
histogram
exit
is
the
bar
moving
against
the
current
trade
&
cloud.
Sometimes
this
histogram 
counter-move
lasts
for
many
bars.
This
flag
provides
a
simple
way
to
monitor
when
to
execute
the 
histogram
exit
again.
SO...In
a
blue
cloud
reset
this
flag
when
histogram
moves
UP. 
In
a
red
cloud
reset
this
flag
when
histogram
moves
DOWN.
12.
1h
Trade
Support
Flag 
This
flag
is
used
to
ignore
5m
exits.
Set
this
flag
with
the
following
conditions: 
Blue
1h
cloud: 
1h
Buy
trigger
OR 
(
1h
21ema
>
previous
bar
AND
1h
RSIma
>
0
) 
Red
1h
cloud:
1h
Sell
trigger
OR 
(
1h
21ema
<
previous
bar
AND
1h
RSIma
<
0
)
Exit
Methods
1.
Raw
RSI
>
70
for
3
bars
&
break
lower
below
(70
or
rsi21ema) 
or
RSI
<
30
for
3
bars
&
break
higher
above
(30
or
rsi21ema). 
note:
raw
rsi
may
remain
>
70
or
<
30
for
a
considerable
period...we
stay
in
trade
until 
the
break
across
70
or
30
or
rsi21ema. 
2.
Close
across
13ema
in
ANY
time
frame. 
3.
Flag
8
exit
-
1h
5ema. 
4.
Flag
9
exit
-
1h
Histogram
exit. 
5.
When
the
1h
provides
full
trade
support...ignore
5m
exits
(1
&
2).
This
is
Flag
12. 
1h
entry
trigger
ALWAYS
overrides
5m
exit. 
1h
21ema
trending
with
trade
AND
RSIma
across
0
supporting
trade
overrides
5m
exit. 
note:
1h
close
across
13ema
is
STILL
the
exit
criteria
in
these
kinds
of
trades. 
note:
1h
21ema
exactly
equal
to
previous
bar
provides
trade
support...it's
not
against
trade. 
6.
It's
entirely
possible
to
get
5m
triggers
against
currrent
trade
when
1h
ma's
are
supporting
the
trade. 
Ignore
5m
triggers
which
contradict
the
current
trade
and
do
not
exit.
Use
normal
1h
exit
trigger
to 
end
trade. 
7.
obsolete. 
8.
On
Friday
after
12pm;
execute
first
exit
trigger
for
any
open
trade
unless
Flag
8
is
active
or
1h
raw 
RSI
is
moving
in
favor
of
trade
or
prices
are
above
(below)
1h
5ema
and
counting
towards
Flag
8 
being
active.
Continue
to
follow
Flags
8
&
9
and
process
normally
but
do
not
open
any
new
positions. 
Otherwise
exit
all
trades
by
1400. 
9.
On
Friday
after
12pm,
if
trade
is
being
prolonged
as
outlined
in
#8,
exit
trade
if
1h
raw
RSI
moves 
against
trade. 
10.
Open
no
new
trades
after
0900
Friday.
******************************************************************************************
Candlestick
AdditionThis
will
be
used
to
optimize
exit
points
and
pips
for
a
given
trend.
Not
all
trends
will
have
a
shooting 
star
or
hammer
but
these
are
the
candle
formations
we
will
use
with
the
following
rules.
1.
Shooting
star
applies
to
an
uptrend
/
blue
cloud
and
a
hammer
applies
to
a
downtrend
/
red
cloud. 
We
will
ignore
the
gravestone
&
hanging
top
as
too
unreliable;
these
are
a
shooting
star
in 
downtrend
and
a
hammer
in
an
uptrend. 
2.
These
candles
will
be
applied
on
the
1h
chart
only.
They
work
well
on
the
5m
chart
also
but
often 
we
want
to
stay
in
the
trade
as
the
trade
has
continued
1h
support.
If
this
occurs
while
the
15m 
chart
is
active
we
execute
the
1h
exit
anyway.
We
ignore
the
15m
chart
for
the
purpose
of
15m 
shooting
star
/
hammer.
If
applicable
we
process
15m
exits
normally.
Of
course
that
assumes
Flag 
8
or
9
is
not
active
which
disable
15m
exits. 
3.
If
acceleration
Flag
8
is
active
and
either
the
shooting
star
or
hammer
appears
we
will
EXIT
at
the 
close
of
that
1h
bar
rather
than
await
a
5ema
cross,
13ema
cross,
histogram
close,
or
raw
RSI 
reverse
move
and
giving
those
pips
back.
IOW,
we
will
always
take
this
exit
if
conditions
are
right. 
No
10
pip
rule
applies. 
4.
If
acceleration
Flag
8
is
NOT
active: 
a.
If
a
trade
IS
active
exit
if
the
shooting
star
high
is
the
highest
high
for
8
bars
or
hammer
low
is 
lowest
low
for
8
bars. 
b.
If
other
conditions
are
not
present
which
mandate
a
candlestick
exit,
then
raw
RSI
must
be
>
70 
for
a
shooting
star
exit
or
<
30
for
a
hammer
exit.
Execute
the
exit.
Then
process
normally. 
5.
It
is
entirely
possible
to
open
and
close
a
trade
on
the
same
1h
bar...5m
open
&
1h
close...since
the 
1h
confirmation
was
the
previous
bar.
******************************************************************************************
Parameters
for
Long-Term
Backtesting
1.
Current
RSI34ema
vs
RSI21ema. 
2.
Current
21ema
vs
34ema
vs
55sma. 
3.
Trading
range
def.
How
much
change
from
2
bars
ago?
Currently
2.
Is
1.8
better?
or
something 
else?
4.
Entry
condition.
Currently
close
across
55sma
required.
vs
not
required. 
5.
Close
across
rsi
70/30
for
3
periods
to
exit.
Compare
to
4,5,2? 
6.
Substitute
raw
RSI
for
histogram
entry
confirmation
on
1h. 
7.
Mandate
raw
1h
RSI
for
all
trade
entry.Question:
Must
one
relenquish
their
trading
approach
to
backtest
it?
Are
the
people
who 
backtest
the
system
likely
to
steal
it
once
they
see
it's
incredibly
profitable?
How
to
prevent 
this?
QUESTION
1.
Market
order
or
price
order
for
exit
orders? 
2.
When
we
turn
BB
of
due
to
major
reports,
will
the
system
continue
calculcations
as
the
bars
painted 
we
actually
view
in
TOS
or
will
they
be
skewed? 
3.
My
exits
&
conditions
typically
use
<
>.
How
should
=
be
handled?
Python? 
4.
Compare
candles
between
brokers? 
5.